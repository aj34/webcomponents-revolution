<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Web Components are the Revolution</title>

    <meta name="description" content="Web Components are the Revolution">
    <meta name="author" content="Rob Dodson">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/sky.css" id="theme">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/github.css">

    <!-- Our styles -->
    <link rel="stylesheet" href="css/styles.css" id="styles">

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
      document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Custom Elements -->
    <!-- Include Chart.js so our import can use it -->
    <script src="./lib/js/chart.min.js"></script>
    <link rel="import" href="./imports/chart.html">
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides" style="zoom: 1 !important;">

        <section data-background="#B4413B">
          <h1 class="billboard" style="
            text-align: left;
            font-size: 160px;
            color: #FFF;
            -webkit-transform: rotate(-15deg);
          ">W<span style="font-size: 160px;">e</span><span style="font-size: 162px;">b</span> <span style="font-size: 164px;">C</span><span style="font-size: 166px;">o</span><span style="font-size: 168px;">m</span><span style="font-size: 170px;">p</span><span style="font-size: 172px;">o</span><span style="font-size: 174px;">n</span><span style="font-size: 176px;">e</span><span style="font-size: 178px;">n</span><span style="font-size: 180px;">t</span><span style="font-size: 182px;">s</span><span style="font-size: 184px;">!</span></h1>

          <h1 class="stencil" style="
            text-align: left;
            font-size: 140px;
            color: #F7E4A9;
            -webkit-transform: rotate(-10deg);
          "><span style="font-size: 140px">R</span><span style="font-size: 142px">e</span><span style="font-size: 144px">v</span><span style="font-size: 146px">o</span><span style="font-size: 148px">l</span><span style="font-size: 150px">u</span><span style="font-size: 152px">t</span><span style="font-size: 154px">i</span><span style="font-size: 156px">o</span><span style="font-size: 158px">n</span><span style="font-size: 160px">!</span></h1>
          <!-- <p>
            <small><a href="http://robdodson.me">Rob Dodson</a> / <a href="http://twitter.com/rob_dodson">@rob_dodson</a></small>
          </p> -->
        </section>

        <section>
          <h1 style="text-transform: none;">Hi</h1>

          <aside class="notes">
            Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
          </aside>
        </section>

        <section>
          <h2>Web Components</h2>
          <h2>...Wat?</h2>

          <aside class="notes">
            Oh hey, these are some notes. They'll be hidden in your presentation, but you can see them if you open the speaker notes window (hit 's' on your keyboard).
          </aside>
        </section>

        <section>
          <h1>&lt;video&gt;</h1>
        </section>

        <section>
          <video controls preload="none" poster="http://media.w3.org/2010/05/sintel/poster.png">
            <source id="mp4" src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4">
            <source id="webm" src="http://media.w3.org/2010/05/sintel/trailer.webm" type="video/webm">
            <source id="ogv" src="http://media.w3.org/2010/05/sintel/trailer.ogv" type="video/ogg">
          </video>

          <pre><code data-trim contenteditable style="margin-top: 20px;">
&lt;video controls preload="none" poster="./video/poster.png"&gt;
  &lt;source id="mp4" src="./video/trailer.mp4" type="video/mp4"&gt;
  &lt;source id="webm" src="./video/trailer.webm" type="video/webm"&gt;
  &lt;source id="ogv" src="./video/trailer.ogv" type="video/ogg"&gt;
&lt;/video&gt;
          </code></pre>
        </section>

        <section style="height: 300px;">
          <h2>&lt;chart-pie&gt;</h2>
          <div class="fragment" data-pie="true"></div>
          <script>
            (function () {
              var showPie = function showPie(e) {
                if (Boolean(e.fragment.getAttribute('data-pie'))) {
                  var slide = Reveal.getCurrentSlide();
                  var pie = document.createElement('chart-pie');
                  slide.appendChild(pie);
                  Reveal.removeEventListener('fragmentshown', showPie);
                }
              };

              Reveal.addEventListener('fragmentshown', showPie);
            }());
          </script>
        </section>

        <section style="text-align: left;">
          <h2>With Web Components...</h2>
          <br>
          <h3 class="fragment">1. Create your own HTML tags</h3>
          <h3 class="fragment">2. Encapsulate your styles</h3>
          <h3 class="fragment">3. Tap into lifecycle callbacks</h3>
        </section>

        <section>
          <h2>Extend the Browser</h2>
        </section>

        <section>
          <h1>The Tools</h1>
        </section>

        <section>
          <div style="text-align: left; display: inline-block;">
            <h2>Templates</h2>
            <h2 class="fragment">Shadow DOM</h2>
            <h2 class="fragment">Custom Elements</h2>
            <h2 class="fragment">Imports</h2>
          </div>
        </section>
        
        <section>
          <h1>Templates</h1>
        </section>

        <section>
          <p>
            <em>Scaffold your component.</em>
          </p>
        </section>

        <section>
<pre><code data-trim data-noescape contenteditable style="margin-top: 20px;">
<span class="fragment" data-fragment-index="1">&lt;template id="my-widget"&gt;</span>
  <span class="fragment" data-fragment-index="2">&lt;p&gt;Once upon a time...&lt;/p&gt;</span>
  <span class="fragment" data-fragment-index="3">&lt;img src=""/&gt; &lt;!-- Fill me in when you're ready --&gt;</span>
  <span class="fragment" data-fragment-index="4">&lt;script&gt;
    alert("I'm chillin."); // Totally inert!
  &lt;/script&gt;</span>
<span class="fragment" data-fragment-index="1">&lt;/template&gt;</span>
</code></pre>

<pre class="fragment"><code data-trim contenteditable style="margin-top: 20px;">
&lt;script&gt;
  var template = document.querySelector('#my-widget');
  document.body.appendChild(template.content.cloneNode(true));
  // OR
  document.body.appendChild(template.innerHTML);
&lt;/script&gt;
</code></pre>
          <aside class="notes">
            Working directly w/ DOM
            Parsed; not rendered
            Not run, stylesheets/images not loaded, media not played
            Hidden from document. Cannot traverse into its DOM
            document.querySelector('#mytemplate .comment') == null
              but
            document.querySelector('#mytemplate').content.img.src

            What happens if you use innerHTML?
          </aside>
        </section>
        
        <section class="demo" id="section-demo1">
          <div class="demo-code">
            <pre><code data-trim contenteditable style="margin-top: 20px;">
<template id="my-widget">
  <img src=""/>
  <p>Templates. Full of WIN!</p>
  <script>
    alert("I'm alive!")
  </script>
</template>

&lt;script&gt;
  var template = document.querySelector('#my-widget');
  template.content.querySelector('img').src = './img/corgi.jpg';
  document.body.appendChild(template.content.cloneNode(true));
&lt;/script&gt;
            </code></pre>
            <button class="btn-demo" onclick="runDemo1();">Run</button>
          </div>

          <template id="template-demo1">
            <img width="300" src=""/>
            <p>Templates. Full of WIN!</p>
            <script>
              alert("I'm alive!");
            </script>
          </template>
          <script>
            function runDemo1() {
              var template = document.querySelector('#template-demo1');
              template.content.querySelector('img').src = 'http://localhost:3000/img/corgi.jpg';
              var section = document.querySelector('#section-demo1');
              section.appendChild(template.content.cloneNode(true));
            }
          </script>
        </section>

        <section style="text-align: left;">
          <h2>Gotchas</h2>
          <h3>No Built-In Interpolation</h3>
          <h3>Nested Templates Aren't Automatically Activated</h3>
        </section>

        <section>
          <h2>Support</h2>
          
        </section>

        <section>
          <h2>Templates</h2>
          <ul>
            <li>
              Completely inert
            </li>
            <li>
              Activates when inserted into the DOM
            </li>
            <li>
              Great for holding Shadow DOM
            </li>
          </ul>
        </section>

        <section data-state="blackout">
          <h1 style="color: #FFF;">Shadow DOM</h1>
        </section>

        <section style="text-align: left;">
          <p>
            Shadow DOM allows developers to encapsulate their HTML markup and CSS styles.
          </p>
          <p>
            It gives us the ability to build our own 1st class tags just like the &lt;video&gt; or &lt;audio&gt; tag.
          </p>
        </section>

        <section>
          <p>video tag example w/ show shadow dom</p>
        </section>

        <section data-markdown>
          <script type="text/template">
            Simple html document

            ```
            <body>
              <div class="my-widget">
                <h1>My Widget Header</h1>
                <p>Some my-widget content</p>
              </div>
              <div class="my-other-widget">
                <h1>My Other Widget Header</h1>
                <p>Some my-other-widget content</p>
              </div>
            </body>
            ```

            and graph?
          </script>
        </section>

        <section class="demo">
          <div class="demo-code">
<pre><code data-trim data-noescape contenteditable style="margin-top: 20px;">
<span class="fragment" data-fragment-index="1">&lt;div class="widget"&gt;Hello, world!&lt;/div&gt;</span><span class="fragment" data-fragment-index="2">
&lt;script&gt;
  var host = document.querySelector('.widget');
  var root = host.createShadowRoot();
  root.textContent = 'Im inside yr div!';
&lt;/script&gt;
</span>
</code></pre>
            <button class="btn-demo" onclick="runDemo2();">Run</button>
          </div>

          <div class="widget">Hello, world!</div>
          <script>
            function runDemo2() {
              var host = document.querySelector('.widget');
              var root = host.createShadowRoot();
              root.textContent = 'Im inside yr div!';
            }

            document.addEventListener('keyup', function(e) {
              if (e.keyCode === 74) { // j
                var fragments = Reveal.getCurrentSlide().querySelectorAll('.fragment');
                Array.prototype.forEach.call(fragments, function(fragment) {
                  fragment.classList.toggle('force-focus');
                });
              }
            });
          </script>
          
          <p>inspect with dev tools</p>
          <p>and graph?</p>

          <aside>
            The takeaway is that the content inside of the shadow host is not rendered. Instead, the content inside of the shadow root is what gets rendered.
          </aside>
        </section>

        <section>
          <img style="margin-top: -30px; width: 100%;" class="img-chromeless" src="./img/tree-of-trees3.svg">
        </section>

        <section data-markdown>
          <script type="text/template">
            Another example

            ```
            <body>
              <div class="widget">Hello, world!</div>
              <script>
                var host = document.querySelector('.widget');
                var root = host.createShadowRoot();

                var header = document.createElement('h1');
                header.textContent = 'A Wild Shadow Header Appeared!';

                var paragraph = document.createElement('p');
                paragraph.textContent = 'Some sneaky shadow text';

                root.appendChild(header);
                root.appendChild(paragraph);
              </script>
            </body>
            ```
          </script>

          inspect with the dev tools

          <aside>
            Here I’m taking our previous example and just adding two additional elements to it. I’ve done this to illustrate that working with the Shadow DOM is really not so different from working with the regular DOM. You still create elements and use appendChild or insertBefore to add them to a parent.

            Just like before, the content in the shadow host, Hello, world!, is not rendered. Instead the content in the shadow root is rendered.

            “That’s easy enough,” you might say. “But what if I actually want the content in my shadow host to render?”
          </aside>
        </section>

        <section data-markdown>
          <script type="text/template">
            Style encapsulation

            ```
            <body>
              <style>
                button {
                  font-size: 18px;
                  font-family: cursive;
                }
              </style>
              <button>I'm a regular button</button>
              <div></div>

              <script>
                var host = document.querySelector('div');
                var root = host.createShadowRoot();
                root.innerHTML = '<style>button { font-size: 24px; color: blue; } </style>' +
                                 '<button>I\'m a shadow button</button>'
              </script>
            </body>
            ```
          </script>
        </section>

        <section>
          Styling :host
        </section>

        <section>
          Styling ::parts
        </section>

        <section data-markdown>
          <script type="text/template">
            content

            ```
            <body>
              <div class="pokemon">
                Jigglypuff
              </div>

              <template class="pokemon-template">
                <h1>A Wild <content></content> Appeared!</h1>
              </template>

              <script>
                var host = document.querySelector('.pokemon');
                var root = host.createShadowRoot();
                var template = document.querySelector('.pokemon-template');
                root.appendChild(template.content.cloneNode(true));
              </script>
            </body>
            ```
          </script>

          <aside>
            Using the &lt;content&gt; tag we’ve created an insertion point that projects the text from the .pokemon div so it appears within our shadow &lt;h1&gt;. Insertion points are very powerful because they allow us to change the order in which things render without physically altering the source. It also means that we can be selective about what gets rendered.

            You may have noticed that we’re using a template tag instead of building our Shadow DOM entirely in JavaScript. I’ve found that using &lt;template&gt; tags makes the process of working with the Shadow DOM much easier.
          </aside>
        </section>

        <section data-markdown>
          <script type="text/template">
            A simple selects example

            Dominic&apos;s party invitation
            Eric&apos;s visualizer
          </script>
        </section>

        <section>
          <p>JavaScript is not encapsulated!</p>
        </section>

        <section>
          <p>Events are retargeted</p>
        </section>

        <section>
          <p>Gotchas</p>
        </section>

        <section>
          <p>Support</p>
        </section>

        <section>
          <p>Summary</p>
        </section>

        <section>
          <h1>Imports</h1>
        </section>

        <section data-markdown>
          <script type="text/template">
            Imports are a new type of link tag which should be familiar to you since that’s also how we load our stylesheets.

            ```
            <link rel="import" href="/path/to/some/import.html">
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ```
            <head>
              <meta charset="utf-8">
              <title>Basic HTML Imports</title>
              <!-- Pull in our blog post example -->
              <link rel="import" href="/imports/blog-post.html">
            </head>
            <body>
              <p>Hello World!</p>
            </body>
            ```

            ```
            <div id="blog-post">
              <h1>Awesome header</h1>
              <p>Here is some really interesting paragraph content.</p>
            </div>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ```
            <body>
              <p>Hello World!</p>

              <script>
                var link = document.querySelector('link[rel=import]');
                var content = link.import.querySelector('#blog-post');
                document.body.appendChild(content.cloneNode(true));
              </script>
            </body>
            ```
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            Can we use Shadow DOM...?
          </script>
        </section>

        <section>
          <h1>Custom Elements</h1>
        </section>

        <section>
          <h2>&lt;twbs-navbar&gt;</h2>
        </section>

        <section>
          <h1>Thanks!</h1>
          <h3>Rob Dodson / @rob_dodson</h3>
        </section>

      </div>

    </div>

    <script>

      // Full list of configuration options available here:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: false,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'none', // default/cube/page/concave/zoom/linear/fade/none

        // Optional libraries used to extend on reveal.js
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
          { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
          {
            src: 'plugin/charred-trail/charred-trail.js',
            async: true,
            condition: function() { return !!document.body.classList; }
          }
        ]
      });

    </script>

  </body>
</html>
