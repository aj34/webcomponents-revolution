<template id="widget-template">
  <style>h4 { color: red; }</style>
  <div>
    <h4>I am a widget!</h4>
  </div>
</template>

<script>
  (function () {
    // thisDoc refers to the "importee", which is chart.html
    var thisDoc = document.currentScript.ownerDocument;

    // thatDoc refers to the "importer", which is index.html
    var thatDoc = document;

    var WidgetProto = Object.create(HTMLElement.prototype);

    WidgetProto.createdCallback = function() {
      var template = thisDoc.querySelector("#widget-template");
      var root = this.createShadowRoot();
      root.appendChild(template.content.cloneNode(true));
    };

    var Widget = document.register("my-widget", {
      prototype: WidgetProto
    });
  }());
</script>